# Number Capabilities (Enhanced)
- name-code: EALC1001 # Button 0
  name: Press 0
  context:
    expects: []
    returns: {}
    steps:
      - command: if
        condition: [EAIV1002, equals, "0"]
        then:
          - command: set
            target: EAIV1002
            value: "0"
        else:
          - command: string-concat
            target: EAIV1002
            values: [EAIV1002, "0"]
      - command: set
        target: EAIV1003
        value: "C"

- name-code: EALC1002 # Button 1
  name: Press 1
  context:
    expects: []
    returns: {}
    steps:
      - command: if
        condition: [EAIV1002, equals, "0"]
        then:
          - command: set
            target: EAIV1002
            value: "1"
        else:
          - command: string-concat
            target: EAIV1002
            values: [EAIV1002, "1"]
      - command: set
        target: EAIV1003
        value: "C"

- name-code: EALC1003 # Button 2
  name: Press 2
  context:
    expects: []
    returns: {}
    steps:
      - command: if
        condition: [EAIV1002, equals, "0"]
        then:
          - command: set
            target: EAIV1002
            value: "2"
        else:
          - command: string-concat
            target: EAIV1002
            values: [EAIV1002, "2"]
      - command: set
        target: EAIV1003
        value: "C"

- name-code: EALC1004 # Button 3
  name: Press 3
  context:
    expects: []
    returns: {}
    steps:
      - command: if
        condition: [EAIV1002, equals, "0"]
        then:
          - command: set
            target: EAIV1002
            value: "3"
        else:
          - command: string-concat
            target: EAIV1002
            values: [EAIV1002, "3"]
      - command: set
        target: EAIV1003
        value: "C"

- name-code: EALC1005 # Button 4
  name: Press 4
  context:
    expects: []
    returns: {}
    steps:
      - command: if
        condition: [EAIV1002, equals, "0"]
        then:
          - command: set
            target: EAIV1002
            value: "4"
        else:
          - command: string-concat
            target: EAIV1002
            values: [EAIV1002, "4"]
      - command: set
        target: EAIV1003
        value: "C"

- name-code: EALC1006 # Button 5
  name: Press 5
  context:
    expects: []
    returns: {}
    steps:
      - command: if
        condition: [EAIV1002, equals, "0"]
        then:
          - command: set
            target: EAIV1002
            value: "5"
        else:
          - command: string-concat
            target: EAIV1002
            values: [EAIV1002, "5"]
      - command: set
        target: EAIV1003
        value: "C"

- name-code: EALC1007 # Button 6
  name: Press 6
  context:
    expects: []
    returns: {}
    steps:
      - command: if
        condition: [EAIV1002, equals, "0"]
        then:
          - command: set
            target: EAIV1002
            value: "6"
        else:
          - command: string-concat
            target: EAIV1002
            values: [EAIV1002, "6"]
      - command: set
        target: EAIV1003
        value: "C"

- name-code: EALC1008 # Button 7
  name: Press 7
  context:
    expects: []
    returns: {}
    steps:
      - command: if
        condition: [EAIV1002, equals, "0"]
        then:
          - command: set
            target: EAIV1002
            value: "7"
        else:
          - command: string-concat
            target: EAIV1002
            values: [EAIV1002, "7"]
      - command: set
        target: EAIV1003
        value: "C"

- name-code: EALC1009 # Button 8
  name: Press 8
  context:
    expects: []
    returns: {}
    steps:
      - command: if
        condition: [EAIV1002, equals, "0"]
        then:
          - command: set
            target: EAIV1002
            value: "8"
        else:
          - command: string-concat
            target: EAIV1002
            values: [EAIV1002, "8"]
      - command: set
        target: EAIV1003
        value: "C"

- name-code: EALC1010 # Button 9
  name: Press 9
  context:
    expects: []
    returns: {}
    steps:
      - command: if
        condition: [EAIV1002, equals, "0"]
        then:
          - command: set
            target: EAIV1002
            value: "9"
        else:
          - command: string-concat
            target: EAIV1002
            values: [EAIV1002, "9"]
      - command: set
        target: EAIV1003
        value: "C"

# Operator Capabilities
- name-code: EALC1013 # Button +
  name: Press Plus
  context:
    expects: []
    returns: {}
    steps:
      - command: string-concat
        target: EAIV1002
        values: [EAIV1002, "+"]

- name-code: EALC1014 # Button -
  name: Press Minus
  context:
    expects: []
    returns: {}
    steps:
      - command: string-concat
        target: EAIV1002
        values: [EAIV1002, "-"]

- name-code: EALC1015 # Button *
  name: Press Multiply
  context:
    expects: []
    returns: {}
    steps:
      - command: string-concat
        target: EAIV1002
        values: [EAIV1002, "*"]

- name-code: EALC1016 # Button /
  name: Press Divide
  context:
    expects: []
    returns: {}
    steps:
      - command: string-concat
        target: EAIV1002
        values: [EAIV1002, "/"]

# Control Capabilities
- name-code: EALC1011 # Button C/AC (Clear)
  name: Clear
  context:
    expects: []
    returns: {}
    steps:
      - command: set
        target: EAIV1002
        value: "0"
      - command: set
        target: EAIV1003
        value: "AC"

- name-code: EALC1017 # Button = (Equals)
  name: Evaluate Expression
  context:
    expects: []
    returns: {}
    steps:
      - command: set
        target: EAIV1002
        value: EAIV1002  # Triggers BODMAS evaluation
      - command: set
        target: EAIV1003
        value: "C"  # Change to "C" after calculation

# New Features
- name-code: EALC1018 # Button . (Decimal Point)
  name: Press Decimal
  context:
    expects: []
    returns: {}
    steps:
      - command: string-concat
        target: EAIV1002
        values: [EAIV1002, "."]
      - command: set
        target: EAIV1003
        value: "C"

- name-code: EALC1019 # Button âŒ« (Backspace)
  name: Backspace
  context:
    expects: []
    returns: {}
    steps:
      - command: string-length
        source: EAIV1002
        target: EAIV1001  # Temp storage for length
      - command: if
        condition: [EAIV1001, greater-than, 1]
        then:
          - command: string-substring
            source: EAIV1002
            target: EAIV1002
            start: 0
            end: -1  # All but last character
        else:
          - command: set
            target: EAIV1002
            value: "0"
          - command: set
            target: EAIV1003
            value: "AC"

- name-code: EALC1020 # Button % (Percentage)
  name: Press Percentage
  context:
    expects: []
    returns: {}
    steps:
      - command: string-concat
        target: EAIV1002
        values: [EAIV1002, "%"]
      - command: set
        target: EAIV1003
        value: "C"

# Display Controller Capability
- name-code: EALC1012 # Get Controller
  name: Get Display Controller
  context:
    expects: []
    returns: 
      value: EAIV1002
    steps:
      - command: return
        value: EAIV1002
